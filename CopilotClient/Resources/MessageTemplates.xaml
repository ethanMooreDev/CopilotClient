<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:selectors="using:CopilotClient.Selectors"
    xmlns:controls="using:CommunityToolkit.WinUI.UI.Controls"
    xmlns:converters="using:CopilotClient.Converters"
>
    <converters:DateToStringConverter x:Key="DateToStringConverter" />
    
    <!-- USER MESSAGE TEMPLATE -->
    <DataTemplate x:Key="UserMessageTemplate" >
        <StackPanel Margin="0,0,0,8">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <Border 
                    Grid.Row="0"
                    Padding="8"
                    CornerRadius="8"
                    Background="#1f5191"
                    MaxWidth="800"
                    HorizontalAlignment="Right"
                >
                    <TextBlock 
                    Text="{Binding Content}"
                    TextWrapping="Wrap"
                    Foreground="White"
                    HorizontalAlignment="Right"
                     
                />
                </Border>
                <TextBlock
                    Grid.Row="1"
                    HorizontalAlignment="Right"
                    Margin="4"
                    Text="{Binding CreatedAt, Converter={StaticResource DateToStringConverter} }"
                />
                <TextBlock
                    Grid.Row="2"
                    HorizontalAlignment="Right"
                    Margin="4,0,4,4"
                    Text="{Binding StatusString}"
                />
            </Grid>
        </StackPanel>
    </DataTemplate>

    <!-- ASSISTANT MESSAGE TEMPLATE -->
    <DataTemplate x:Key="AssistantMessageTemplate" >
        <StackPanel Margin="0,0,0,8">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <Border 
                    Grid.Row="0"
                    Padding="8"
                    CornerRadius="8"
                    MaxWidth="800"
                    HorizontalAlignment="Left"
                >
                    <controls:MarkdownTextBlock 
                        Text="{Binding Content}"
                        TextWrapping="Wrap"
                        Foreground="White"
                        HorizontalAlignment="Left"
                        Background="Transparent"
                    />
                </Border>
                <TextBlock
                    Grid.Row="1"
                    HorizontalAlignment="Left"
                    Margin="4"
                    Text="{Binding CreatedAt, Converter={StaticResource DateToStringConverter} }"
                />
            </Grid>
        </StackPanel>
    </DataTemplate>

    <!-- TEMPLATE SELECTOR -->
    <selectors:MessageTemplateSelector
        x:Key="MessageTemplateSelector"
        UserTemplate="{StaticResource UserMessageTemplate}"
        AssistantTemplate="{StaticResource AssistantMessageTemplate}"
    />
</ResourceDictionary>